import { SlashCommandBuilder } from 'discord.js'; import { prisma } from '../lib/db.js'; export const data=new SlashCommandBuilder().setName('jail-escape').setDescription('Attempt to escape jail'); export async function execute(i){ const j=await prisma.jail.findFirst({ where:{ guildId:i.guildId!, userId:i.user.id } }); if(!j) return i.reply({ content:'You are not jailed.',ephemeral:true}); const chance=Math.random(); if(chance>0.8){ await prisma.jail.delete({ where:{ id:j.id } }); await i.reply({ content:'A miracle! You slip the lock and escape.'}); } else { await i.reply({ content:'You rattle chains. The guard smirks. Try again later.'}); } }
