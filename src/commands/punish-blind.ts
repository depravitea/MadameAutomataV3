import { SlashCommandBuilder, PermissionFlagsBits } from 'discord.js'; import { spendGems } from '../lib/economy.js'; export const data=new SlashCommandBuilder().setName('punish-blind').setDescription('Blindfold a user (toggle role)').addUserOption(o=>o.setName('target').setDescription('User').setRequired(true)).addBooleanOption(o=>o.setName('on').setDescription('On?').setRequired(true)).setDefaultMemberPermissions(PermissionFlagsBits.ManageRoles); export async function execute(i){ const t=i.options.getUser('target',true); const on=i.options.getBoolean('on',true); const ok=await spendGems(i.guildId!,i.user.id,5); if(!ok) return i.reply({content:'Not enough gems.',ephemeral:true}); const role=i.guild.roles.cache.find(r=>r.name.toLowerCase().includes('blindfold')); if(!role) return i.reply({content:'Create a Blindfold role or set /config blindfoldRole.',ephemeral:true}); const m=await i.guild.members.fetch(t.id); await m.roles[on?'add':'remove'](role.id); await i.reply({ content:`${on?'Darkness descends upon':'Blindfold lifted from'} ${t}.`}); }
