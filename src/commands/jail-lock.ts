import { SlashCommandBuilder, PermissionFlagsBits } from 'discord.js'; import { prisma } from '../lib/db.js'; export const data=new SlashCommandBuilder().setName('jail-lock').setDescription('Lock someone in bot jail').addUserOption(o=>o.setName('user').setDescription('User').setRequired(true)).addStringOption(o=>o.setName('reason').setDescription('Reason')).setDefaultMemberPermissions(PermissionFlagsBits.ModerateMembers); export async function execute(i){ const u=i.options.getUser('user',true); const reason=i.options.getString('reason')||'disobedience'; await prisma.jail.upsert({ where:{ id:`${i.guildId}-${u.id}` }, update:{ locked:true, reason }, create:{ id:`${i.guildId}-${u.id}`, guildId:i.guildId!, userId:u.id, locked:true, reason } }); await i.reply({ content:`${u} is locked in the oubliette. (${reason})`}); }
